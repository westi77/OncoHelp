# Метрики качества системы OncoHelp

В данном разделе описаны метрики, использованные для оценки качества работы прототипа системы **OncoHelp** — AI-ассистента для проверки соответствия лечения онкологических пациентов клиническим рекомендациям.

Метрики подбирались таким образом, чтобы отражать реальную функциональность системы, проверяемую в ходе тестирования на обезличенных клинических кейсах.

---

## 1. Точность классификации соответствия лечения

**Описание метрики:**  
Доля клинических кейсов, в которых система корректно определяет итоговый статус соответствия лечения клиническим рекомендациям.

Используемые классы:
- соответствует  
- частично соответствует  
- не соответствует  
- невозможно оценить из-за недостатка данных  

**Метод оценки:**  
Сравнение итогового статуса, выданного системой, с эталонной экспертной оценкой для каждого тестового кейса.

**Результат:**  
- 100% корректных классификаций статуса соответствия лечения на тестовом наборе кейсов.

---

## 2. Полнота выявления клинических отклонений

**Описание метрики:**  
Способность системы выявлять все клинически значимые отклонения от стандартов лечения, предусмотренных клиническими рекомендациями.

Примеры отклонений:
- отсутствие обязательного этапа терапии;
- использование нерекомендованных препаратов или методов;
- неполный объём лечения;
- конфликт или противоречие в назначениях.

**Метод оценки:**  
Ручная проверка наличия всех ожидаемых отклонений в выводе системы.

**Результат:**  
- Все ключевые клинические отклонения были выявлены во всех тестовых кейсах.

---

## 3. Отсутствие клинических галлюцинаций

**Описание метрики:**  
Частота появления в выводе системы:
- вымышленных назначений;
- нерелевантных молекулярных маркеров;
- рекомендаций, не относящихся к заданной нозологии;
- клинических решений, отсутствующих в источниках.

**Метод оценки:**  
Анализ выводов системы на предмет наличия несуществующих или нерелевантных данных.

**Результат:**  
- 0 ложных клинических назначений и нерелевантных маркеров на тестовом наборе после доработки промпта.

---

## 4. Устойчивость к формату медицинской документации

**Описание метрики:**  
Способность системы сохранять корректность клинического вывода при различной структуре истории болезни.

Проверяемые форматы:
- сплошной неструктурированный текст;
- текст с разделами;
- списки и табличные представления.

**Метод оценки:**  
Сравнение клинической сути выводов для одного и того же кейса, представленного в разных форматах.

**Результат:**  
- Клиническая суть вывода сохранялась во всех протестированных форматах.

---

## 5. Корректность извлечения ключевых клинических данных

**Описание метрики:**  
Корректность автоматического извлечения системой ключевых параметров из истории болезни.

Параметры:
- диагноз и нозология;
- стадия и TNM (если указаны);
- проведённое и планируемое лечение;
- принадлежность к особым клиническим группам.

**Метод оценки:**  
Сравнение извлечённых системой данных с исходным текстом истории болезни.

**Результат:**  
- Ключевые клинические параметры были корректно извлечены во всех тестовых кейсах.

---

## 6. Стабильность контекста в диалоговом режиме

**Описание метрики:**  
Способность системы корректно отвечать на уточняющие вопросы после основного анализа без изменения ранее выданных выводов.

Проверяемые аспекты:
- сохранение статусов и процентов соответствия;
- отсутствие повторного анализа всей истории болезни;
- отсутствие новых клинических выводов.

**Метод оценки:**  
Серия последовательных вопросов после основного отчёта.

**Результат:**  
- Контекст анализа сохранялся во всех протестированных диалоговых сценариях.

---

## 7. Корректность ответов на уточняющие вопросы

**Описание метрики:**  
Соответствие ответов системы вопросам пользователя заданному анализу и клиническим рекомендациям.

Примеры вопросов:
- «Почему это несоответствие?»  
- «Каких данных не хватает?»  

**Метод оценки:**  
Ручная проверка релевантности и полноты ответов.

**Результат:**  
- Ответы системы были корректны и основаны на ранее выданном анализе.

---

## 8. Время анализа истории болезни

**Описание метрики:**  
Среднее время формирования полного аналитического отчёта по истории болезни.

**Метод оценки:**  
Замер времени от момента загрузки истории болезни до получения итогового отчёта.

**Результат:**  
- Среднее время анализа одной истории болезни составляет около 15 секунд.

---

## 9. Эффективность использования токенов

**Описание метрики:**  
Отсутствие повторной обработки всей истории болезни при переходе в диалоговый режим.

**Метод оценки:**  
Анализ объёма повторного контекста в серии вопросов после основного отчёта.

**Результат:**  
- Повторная передача полного текста истории болезни в диалоговом режиме не требуется, что снижает расход токенов.

---

## Итог

Используемые метрики подтверждают, что прототип OncoHelp:
- корректно решает задачу верификации лечения по клиническим рекомендациям;
- устойчив к формату и объёму медицинских документов;
- стабильно работает в диалоговом режиме;
- пригоден для дальнейшего масштабирования и развития.
