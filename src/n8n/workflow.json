{
  "name": "Workflow",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message",
          "callback_query"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -2368,
        1376
      ],
      "id": "255ad9e2-7288-4ce0-b84e-c187358cbe70",
      "name": "Telegram Trigger",
      "webhookId": "196358e8-7dad-4d79-bde9-6bdea86c4a0c",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "bf488795-6800-49f6-8592-d71c48089ae7",
              "leftValue": "={{ $json.message?.text }}",
              "rightValue": "/start",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1696,
        1760
      ],
      "id": "1e3e9cc9-4aff-4380-9174-f3756bebf85d",
      "name": "If"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ OncoHelp!  –Ø –ø–æ–º–æ–≥–∞—é –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏ –∏ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ –†–§.  –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "üöÄ –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É",
                    "additionalFields": {
                      "callback_data": "start_work"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "ü§ñ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç",
                    "additionalFields": {
                      "callback_data": "about"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å",
                    "additionalFields": {
                      "callback_data": "feedback"
                    }
                  },
                  {
                    "text": "üõ† –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
                    "additionalFields": {
                      "callback_data": "support"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1552,
        1520
      ],
      "id": "00ce5b95-3e55-4b7c-a368-8633a8428456",
      "name": "Send a text message",
      "webhookId": "6bb53fb2-011a-498f-9008-799a0373ef17",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "start_work",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "55e9bf43-d164-4be3-a5cd-78fe3f25f70d"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "start_work"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8c2578ba-0692-4e6e-ab2e-247b2120f300",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "about",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "about"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "5f37529f-2e4b-4811-9861-568ebdab576d",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "feedback",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "feedback"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "01740bd9-53bf-4c94-b49e-575af87e8b64",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "support",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "support"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "002a3ceb-6925-4f71-b4ed-8021e8ac2e7a",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "role_doctor",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "role_doctor"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b3df2f7a-5bd6-493e-9d93-b7a252e251ac",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "role_patient",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "role_patient "
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "80c74ee5-80c6-4fa9-a427-5b05fa2e14cd",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "stop_chat",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "stop_chat"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "ed8c7bfd-8db5-48b8-abb6-923baeb62cc1",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "buffer_ready",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "buffer_ready"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bc39e876-2e6a-49d3-9d36-13ad27d67a21",
                    "leftValue": "={{ $json.callback_query.data }}",
                    "rightValue": "chage_role",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "chage_role"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -672,
        800
      ],
      "id": "2d39b8fb-a2e4-4dce-86e9-7158c5523904",
      "name": "Switch"
    },
    {
      "parameters": {
        "chatId": "={{ $json.result.chat.id }}",
        "text": "=ü§ñ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ OncoHelp:**  \nüìÑ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –±–æ–ª–µ–∑–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF, Word üî¨ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ–Ω–∫–æ–ª–æ–≥–∏–∏ üìã \n–°–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–Ω –ª–µ—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ –†–§ üë®‚Äç‚öïÔ∏è \n–ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–¥ –≤—Ä–∞—á–∞ –∏–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞  \n‚ö†Ô∏è _–ë–æ—Ç –Ω–æ—Å–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞-–æ–Ω–∫–æ–ª–æ–≥–∞._",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        192
      ],
      "id": "b2a95405-242a-4f69-888f-3a6f843df214",
      "name": "Send a text message1",
      "webhookId": "5c0ada2f-1b6b-49ba-97ee-68e02a747b71",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üõ† –û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º ‚Äî –º—ã –æ—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        1184
      ],
      "id": "2cb3f3b5-3b75-425c-9b38-78e9e3e6947f",
      "name": "Send a text message2",
      "webhookId": "c796f874-5901-4536-8654-2cc408700f8c",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üí¨ –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º ‚Äî –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ–≥–æ –ø—Ä–æ—á–∏—Ç–∞–µ–º.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        992
      ],
      "id": "72c4ee46-b5bd-43dc-bc9d-9cad85168a9d",
      "name": "Send a text message4",
      "webhookId": "03aa7a93-1d97-403f-a4bb-b7b5c6a8707f",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.result.chat.id }}",
        "text": "=üìã **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å **\n\n–í—Ä–∞—á - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —è–∑—ã–∫–µ\n–ü–∞—Ü–∏–µ–Ω—Ç - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º, –ø–æ–Ω—è—Ç–Ω–æ–º —è–∑—ã–∫–µ\n\n__–≠—Ç–æ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª –æ—Ç–≤–µ—Ç –ø–æ–¥ –≤–∞—Å__",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—Ä–∞—á",
                    "additionalFields": {
                      "callback_data": "role_doctor"
                    }
                  },
                  {
                    "text": "–ü–∞—Ü–∏–µ–Ω—Ç",
                    "additionalFields": {
                      "callback_data": "role_patient"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        -144
      ],
      "id": "3886ca24-074c-4e5b-8518-020c5645325e",
      "name": "Send a text message5",
      "webhookId": "46e1ce93-ccd0-4b1e-9c8b-378ee612808a",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "dab2868a-68e3-491a-803b-26949d3cec00",
              "leftValue": "={{ $json.callback_query.data }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1920,
        1376
      ],
      "id": "1461a586-8df6-43a3-943f-c9d73b146543",
      "name": "If1"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∑—ã–≤!",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -800,
        1376
      ],
      "id": "cd31b5d3-5a3c-4b46-bbb7-99eb5f970026",
      "name": "Send a text message7",
      "webhookId": "6e133551-f304-4e5a-bd93-55a8c62f6c37",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "-1003871488822",
        "text": "=–¢–µ—Ö–ü–æ–¥–¥–µ—Ä–∂–∫–∞ @{{ $('Telegram Trigger').item.json.message.chat.username }}:\n{{ $('Telegram Trigger').item.json.message.text }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1024,
        1568
      ],
      "id": "777d96eb-e342-4186-b275-8fff8a1e12d9",
      "name": "Send a text message8",
      "webhookId": "26c5cf51-a5d2-469b-9d2b-2f9d1bf9c9bd",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "‚úÖ –û–±—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -800,
        1568
      ],
      "id": "e890cf52-4a87-45fb-b24e-6dea6ffa4623",
      "name": "Send a text message9",
      "webhookId": "6e133551-f304-4e5a-bd93-55a8c62f6c37",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'idle';\nworkflowStaticData[userId + '_role'] = 'doctor';'doctor';\n\nreturn [{ json: { \n  ...$json,\n  success: true, \n  role: 'doctor', \n  userId \n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        1376
      ],
      "id": "b59c9e9c-c6c1-4ac8-bb83-eca3b045c799",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'idle';\nworkflowStaticData[userId + '_role'] = 'patient';\n\nreturn [{ json: { \n  ...$json,\n  success: true, \n  role: 'patient', \n  userId \n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        1568
      ],
      "id": "4bbe41b2-5c2f-42d1-9130-a0e39f5ccc21",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üë®‚Äç‚öïÔ∏è –í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–µ–∂–∏–º –≤—Ä–∞—á–∞.\n\nüìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF –∏–ª–∏ Word –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º(–ø—Ä–∏ –¥—Ä–æ–±–ª–µ–Ω–∏–∏ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤—Å–µ —Å—Ä–∞–∑—É).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        1376
      ],
      "id": "ac780c61-9836-4029-b752-abedde83d222",
      "name": "Send a text message3",
      "webhookId": "ecec7e79-39ce-431e-8a28-7af383cab5eb",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üôã –í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–µ–∂–∏–º –ø–∞—Ü–∏–µ–Ω—Ç–∞.\n\nüìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF –∏–ª–∏ Word –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º(–ø—Ä–∏ –¥—Ä–æ–±–ª–µ–Ω–∏–∏ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤—Å–µ —Å—Ä–∞–∑—É).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        1568
      ],
      "id": "92abca4a-edb2-4fe7-ae19-84ed8a9bcbfa",
      "name": "Send a text message10",
      "webhookId": "ecec7e79-39ce-431e-8a28-7af383cab5eb",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'feedback';\n\nreturn [{ json: { ...$json, success: true }}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        992
      ],
      "id": "d8fb9c57-a0c8-43ae-ac6a-786336a3a7b2",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'support';\n\nreturn [{ json: { ...$json, success: true }}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        1184
      ],
      "id": "695ac23f-bf2c-4ae0-b183-29684dd6316b",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.message.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nconst state = workflowStaticData[userId + '_state'] || 'idle';\n\n// –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ chat\n// chat-—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∂–∏–≤—ë—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–º—ë—Ç \"–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥\"\nif (state !== 'chat') {\n  workflowStaticData[userId + '_state'] = 'idle';\n}\n\nreturn [{ json: { \n  ...$json,\n  user_state: state\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1472,
        1856
      ],
      "id": "3ae9145d-b7e8-4c8e-a48a-ad1b7322ad03",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.user_state }}",
                    "rightValue": "feedback",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "73d203d4-6023-43b1-91ba-0dcb0b7c095d"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "feedback"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "91cc07b1-d839-49f2-8990-a2a761d43233",
                    "leftValue": "={{ $json.user_state }}",
                    "rightValue": "support",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "support"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "59b82bfe-80b6-4435-968d-6337f86edd22",
                    "leftValue": "={{ $json.user_state }}",
                    "rightValue": "chat",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "chat"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a8d1bce2-5cb4-4f34-a35a-aef4724b9054",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.document }}",
                    "rightValue": "",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "document"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "416d65cd-bad4-4a71-99b2-af832cc40d44",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message?.text }}",
                    "rightValue": "text",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "text"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -1248,
        1808
      ],
      "id": "e39ef11f-f3d1-4b4a-8e33-1a19763dd4a1",
      "name": "Switch1"
    },
    {
      "parameters": {
        "chatId": "-1003871488822",
        "text": "=üõ† –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç @{{ $('Telegram Trigger').item.json.message.chat.username }}:\n{{ $('Telegram Trigger').item.json.message.text }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1024,
        1376
      ],
      "id": "0b8e5930-5157-4a74-9fd4-57afe9f71926",
      "name": "Send a text message6",
      "webhookId": "26c5cf51-a5d2-469b-9d2b-2f9d1bf9c9bd",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $('Telegram Trigger').item.json.message.document.file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -800,
        2416
      ],
      "id": "fb817cf1-3c03-4676-b648-5652daf2f0f2",
      "name": "Get a file",
      "webhookId": "80aa8ea6-2a4d-4f64-88f9-0dd91f6f4be8",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://api.telegram.org/file/bot8400023148:AAGIYOUR_BOT_TOKEN/{{ $json.result.file_path }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        -576,
        2416
      ],
      "id": "dcb8062f-2b69-4479-a1bb-1e9d395e388e",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        -128,
        2240
      ],
      "id": "54742b42-21b7-4691-be68-94d34c3a3c44",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }} ?? {{ $json.message.text }}",
        "options": {
          "systemMessage": "=–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–π JSON –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –±–µ–∑ markdown. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:\n{\"code\": \"–ö–û–î_–ú–ö–ë\", \"name\": \"–ù–ê–ó–í–ê–ù–ò–ï_–ù–ê_–†–£–°–°–ö–û–ú\", \"file_key\": \"–ö–õ–Æ–ß_–ò–ó_–°–ü–ò–°–ö–ê\", \"book_key\": \"–ö–õ–Æ–ß_–ò–ó_–ö–ù–ò–ì_–ò–õ–ò_NULL\", \"special_key\": \"–ö–õ–Æ–ß_–ò–õ–ò_NULL\"}\n\n–î–ª—è file_key –∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞(–∏–ª–∏ null –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç):\n[ \"Acute_lymphoblastic_leukemia_adults\",\n    \"Acute_lymphoblastic_leukemia_children\",\n    \"Acute_myeloid_leukemia_adults\",\n    \"Acute_myeloid_leukemia_children\",\n    \"Acute_promyelocytic_leukemia_adults\",\n    \"Acute_promyelocytic_leukemia_children\",\n    \"Aggressive_follicular_lymphomas\",\n    \"Anemia_in_malignant_neoplasms\",\n    \"Aplastic_anemia_adults\",\n    \"Aplastic_anemia_children\",\n    \"Basal_cell_carcinoma_of_the_skin\",\n    \"Bladder_cancer\",\n    \"Bone_sarcomas\",\n    \"Borderline_ovarian_tumors\",\n    \"Breast_cancer\",\n    \"Cancer_of_the_oropharynx\",\n    \"Cancer_of_the_adrenal_cortex_(adrenocortical_cancer)\",\n    \"Cancer_of_the_colon_and_rectosigmoid_junction\",\n    \"Cancer_of_the_esophagus_and_cardia\",\n    \"Cancer_of_the_kidney_parenchyma\",\n    \"Cancer_of_the_nasal_cavity_and_paranasal_sinuses\",\n    \"Cancer_of_the_urethra\",\n    \"Cancer_or_the_biliary_system\",\n    \"Cervical_cancer\",\n    \"Chronic_lymphocytic_leukemia_small_lymphocyte_lymphoma\",\n    \"Chronic_myeloid_leukemia\",\n    \"Differentiated_cancer_thyroid_gland\",\n    \"Extracranial_germinogenic_tumors\",\n    \"Follicular_lymphoma\",\n    \"Fungal_mycosis\",\n    \"Gastrointestinal_stromal_tumors\",\n    \"Germinogenic_tumors_in_men\",\n    \"Hairy_cell_leukemia\",\n    \"Hemophilia\",\n    \"Hepatoblastoma\",\n    \"Hodgkin's_lymphoma\",\n    \"Idiopathic_thrombocytopenic_purpura_for_adults\",\n    \"Immune_thrombocytopenia\",\n    \"Infantile_hemangioma\",\n    \"Intraocular_retinoblastoma\",\n    \"Kaposi_s_sarcoma\",\n    \"Kaposi's_sarcoma\",\n    \"Laryngeal_cancer\",\n    \"Laryngopharyngeal_cancer\",\n    \"Liver_cancer_(hepatocellular)\",\n    \"Lymphoma_from_mantle_cells\",\n    \"Malignant_neoplasm_of_the_bronchi_and_lungs\",\n    \"Malignant_neoplasms_of_the_lip\",\n    \"Malignant_neoplasms_of_bones_and_articular_cartilage_osteosarcoma_Ewing_s_sarcoma\",\n    \"Malignant_neoplasms_of_the_kidneys_renal_pelvis_ureter_other_and_unspecified_urinary_organs\",\n    \"Malignant_neoplasms_of_the_oral_cavity\",\n    \"Malignant_neoplasms_of_the_vagina\",\n    \"Malignant_tumors_of_the_salivary_glands\",\n    \"Marginal_zone_lymphoma\",\n    \"Medullary_thyroid_cancer\",\n    \"Melanoform_nevus\",\n    \"Melanoma_of_the_skin_and_mucous_membranes\",\n    \"Merkel_s_carcinoma\",\n    \"Mesothelioma_of_the_pleura_peritoneum_and_other_localizations\",\n    \"Multiple_myeloma\",\n    \"Myelodysplastic_syndrome_Myelodysplastic_myeloproliferative_neoplasms\",\n    \"Nasopharyngeal_cancer\",\n    \"Nasopharyngeal_cancer_children\",\n    \"Neuroblastoma\",\n    \"Neuroendocrine_tumors\",\n    \"Nodal_T-cell_lymphomas\",\n    \"Non-epithelial_ovarian_tumors\",\n    \"Other_plasmocellular_neoplasms\",\n    \"Ovarian_cancer_Fallopian_tube_cancer_Primary_peritoneal_cancer\",\n    \"Pancreatic_cancer\",\n    \"Penile_cancer\",\n    \"Ph-negative_myeloproliferative_neoplasms\",\n    \"Plasma_cell_leukemia\",\n    \"Primary_tumors_of_the_central_nervous_system\",\n    \"Prostate_cancer\",\n    \"Rare_coagulopathies_hereditary_deficiency_of_blood_coagulation_factors\",\n    \"Rectal_cancer\",\n    \"Retinoblastoma\",\n    \"Retroperitoneal_extraorgan_sarcomas\",\n    \"Secondary_malignant_neoplasm_of_the_brain_and_meninges\",\n    \"Soft_tissue_sarcomas\",\n    \"Solitary_(extramedullary)_plasmocytoma\",\n    \"Squamous_cell_carcinoma_of_the_anal_canal_anal_margin_and_perianal_skin\",\n    \"Squamous_cell_carcinoma_of_the_skin\",\n    \"Stomach_cancer\",\n    \"Thyroid_cancer\",\n    \"Tracheal_cancer\",\n    \"Trophoblastic_tumors\",\n    \"Tumors_of_the_mediastinum\",\n    \"Tumors_of_the_salivary_glands_in_children\",\n    \"Tumors_of_undetected_primary_localization\",\n    \"Urothelial_cancer_of_the_upper_urinary_tract\",\n    \"Uterine_body_cancer_and_uterine_sarcomas\",\n    \"Uveal_melanoma\",\n    \"Vulvar_cancer\",\n    \"Waldenstrom's_macroglobulinemia\", ]\n\n–î–ª—è book_key –≤—ã–±–µ—Ä–∏ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –≥–ª–∞–≤—É RUSSCO –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ (–∏–ª–∏ null –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç):\n[\n    \"General_principles_of_antitumor_drug_therapy\",\n    \"Features_of_antitumor_drug_treatment_in_elderly_patients\",\n    \"Features_of_drug_therapy_for_solid_tumors_during_pregnancy\",\n    \"Non-small_cell_lung_cancer\",\n    \"Small_cell_lung_cancer\",\n    \"Mesothelioma_of_the_pleura_peritoneum_and_other_localizations_1\",\n    \"Neuroendocrine_neoplasms_of_the_lungs_and_thymus\",\n    \"Thymic_epithelial_tumors\",\n    \"Head_and_neck_tumors\",\n    \"Primary_tumors_of_the_central_nervous_system_1\",\n    \"Metastatic_lesions_of_the_central_nervous_system\",\n    \"Cancer_of_the_esophagus_and_cardia_1\",\n    \"Stomach_cancer_1\",\n    \"Cancer_of_the_colon_rectosigmoid_junction_and_rectum\",\n    \"Cancer_of_the_small_intestine_and_ampulla_of_Vater\",\n    \"Squamous_cell_carcinoma_of_the_anal_canal_anal_margin_and_perianal_skin_1\",\n    \"Malignant_tumors_of_the_liver_and_biliary_system\",\n    \"Pancreatic_cancer_1\",\n    \"Gastrointestinal_stromal_tumors_1\",\n    \"Neuroendocrine_neoplasms_of_the_gastrointestinal_tract_and_pancreas\",\n    \"Pseudomyxoma_peritonei\",\n    \"Cancer_of_the_adrenal_cortex_(adrenocortical_cancer)_1\",\n    \"Breast_cancer_1\",\n    \"Ovarian_cancer_Fallopian_tube_cancer_Primary_peritoneal_cancer_1\",\n    \"Non-epithelial_ovarian_tumors_1\",\n    \"Borderline_ovarian_tumors_1\",\n    \"Cervical_cancer_1\",\n    \"Uterine_body_cancer_and_uterine_sarcomas_1\",\n    \"Trophoblastic_tumors_1\",\n    \"Cancer_of_the_kidney_parenchyma_1\",\n    \"Bladder_cancer_1\",\n    \"Prostate_cancer_1\",\n    \"Germinogenic_tumors_in_men_1\",\n    \"Melanoma_of_the_skin_and_mucous_membranes_1\",\n    \"Malignant_non-melanocytic_skin_tumors_(basal_cell_squamous_cell_Merkel_carcinoma)\",\n    \"Bone_sarcomas_1\",\n    \"Soft_tissue_sarcomas_1\",\n    \"Tumors_of_undetected_primary_localization_1\",\n]\n\n–î–ª—è special_key ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏:\n- –ï—Å–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∞ –±–µ—Ä–µ–º–µ–Ω–Ω–∞ ‚Üí \"Features_of_drug_therapy_for_solid_tumors_during_pregnancy\"\n- –ï—Å–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç –ø–æ–∂–∏–ª–æ–π (60+ –ª–µ—Ç) ‚Üí \"Features_of_antitumor_drug_treatment_in_elderly_patients\"\n- –ò–Ω–∞—á–µ ‚Üí null"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        320,
        592
      ],
      "id": "db03be62-a9f6-4175-84c6-ea175217d0c8",
      "name": "AI Agent",
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "model": "google/gemini-2.0-flash-001",
        "options": {
          "maxTokens": 200,
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        400,
        816
      ],
      "id": "989722ef-17a0-4249-8b5c-5dc434affc71",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "6kLXtrCpJR770JWH",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "c058a47d-3913-43df-9bce-9402f68f6d18",
              "leftValue": "={{ $json.file_key }} ?? {{ $json.book_key }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        896,
        496
      ],
      "id": "0626c52e-50a8-4398-af0f-0f9a59208dec",
      "name": "If2"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        96,
        576
      ],
      "id": "96fbd296-2809-460b-a17a-c9b39009c2de",
      "name": "Merge"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "path": "=/oncology_guidelines/{{ $('Code in JavaScript5').item.json.file_key }}.pdf"
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        1344,
        208
      ],
      "id": "fc6d88ae-7514-4415-96af-eede790d105e",
      "name": "Download a file",
      "credentials": {
        "dropboxOAuth2Api": {
          "id": "ylDTbgHcVionbYsP",
          "name": "Dropbox account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "afe58edd-3cd7-4471-a485-61194a2fafc0",
              "leftValue": "={{ $('Code in JavaScript17').item.json.guidelines_text }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2464,
        1056
      ],
      "id": "e923d503-bfc0-4aec-b046-66737e823e93",
      "name": "If3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–ò–°–¢–û–†–ò–Ø –ë–û–õ–ï–ó–ù–ò –ü–ê–¶–ò–ï–ù–¢–ê:\n{{ $('Merge').item.json.text }}\n–¢–ò–ü –û–ù–ö–û–õ–û–ì–ò–ò: {{ $('If2').item.json.oncology_code }},{{ $('If2').item.json.oncology_name }}\n–ö–õ–ò–ù–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ú–ò–ù–ó–î–†–ê–í–ê:\n{{ $('Code in JavaScript17').item.json.guidelines_text }}\n–ö–õ–ò–ù–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò RUSSCO:\n{{ $('Code in JavaScript17').item.json.book_text }}\n–û–°–û–ë–´–ï –ö–ê–¢–ï–ì–û–†–ò–ò –ü–ê–¶–ò–ï–ù–¢–û–í:\n{{ $('Code in JavaScript17').item.json.special_text }}\n–†–û–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: {{ $('Code in JavaScript15').item.json.role }}",
        "options": {
          "systemMessage": "=–¢—ã ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–µ—á–µ–Ω–∏—è –æ–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º.\n\n–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ü–†–û–í–ï–†–Ø–¢–¨ –∏ –û–ë–™–Ø–°–ù–Ø–¢–¨ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É–∂–µ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–µ—á–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.\n–¢—ã –Ω–µ –Ω–∞–∑–Ω–∞—á–∞–µ—à—å –ª–µ—á–µ–Ω–∏–µ, –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—à—å –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π.\n\n---\n\n### –ò–°–¢–û–ß–ù–ò–ö–ò (—Å—Ç—Ä–æ–≥–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)\n\n1. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ RUSSCO\n2. –ö–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ –†–§\n3. –†–∞–∑–¥–µ–ª—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –æ—Å–æ–±—ã—Ö –≥—Ä—É–ø–ø (–ø–æ–∂–∏–ª—ã–µ 60+, –±–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) ‚Äî –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ\n\n–ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.\n–ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –Ω–∏—Ö.\n–ï—Å–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è ‚Äî —É–∫–∞–∂–∏ —ç—Ç–æ —è–≤–Ω–æ, –±–µ–∑ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ—Ä–æ–Ω—ã.\n\n---\n\n### –°–¢–†–û–ì–ò–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø\n\n* –¢—ã –ù–ï –Ω–∞–∑–Ω–∞—á–∞–µ—à—å –ª–µ—á–µ–Ω–∏–µ\n* –¢—ã –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å, —á—Ç–æ ¬´–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å¬ª\n* –¢—ã –ù–ï —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—à—å –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç —Å–µ–±—è\n* –¢—ã –ù–ï –≤—ã—Ö–æ–¥–∏—à—å –∑–∞ —Ä–∞–º–∫–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –Ω–æ–∑–æ–ª–æ–≥–∏–∏\n* –¢—ã –ù–ï –¥–æ–±–∞–≤–ª—è–µ—à—å –º–∞—Ä–∫–µ—Ä—ã, —Å—Ç–∞–¥–∏–∏ –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏\n\n–î–æ–ø—É—Å—Ç–∏–º—ã –¢–û–õ–¨–ö–û —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏:\n\n* ¬´–≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö —É–∫–∞–∑–∞–Ω–æ¬ª\n* ¬´—Å–æ–≥–ª–∞—Å–Ω–æ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º¬ª\n* ¬´–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç¬ª\n\n---\n\n### –†–ï–ñ–ò–ú –†–ê–ë–û–¢–´\n\n–†–µ–∂–∏–º –∑–∞–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ROLE:\n\n* doctor ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –æ—Ç—á—ë—Ç\n* patient ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∞\n\n–í–ê–ñ–ù–û:\n–û—Ç–≤–µ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –°–¢–†–û–ì–û –≤ –æ–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ.\n–ó–ê–ü–†–ï–©–ï–ù–û:\n\n* –≤—ã–≤–æ–¥–∏—Ç—å –æ–±–∞ —Ä–µ–∂–∏–º–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ\n* —É–ø–æ–º–∏–Ω–∞—Ç—å –¥—Ä—É–≥–æ–π —Ä–µ–∂–∏–º\n* –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏\n\n–í –Ω–∞—á–∞–ª–µ –æ—Ç–≤–µ—Ç–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞–ø–∏—à–∏ –û–î–ù–£ —Å—Ç—Ä–æ–∫—É:\n\n* ¬´–¢–µ–∫—Å—Ç –¥–ª—è –≤—Ä–∞—á–∞¬ª\n  –∏–ª–∏\n* ¬´–¢–µ–∫—Å—Ç –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∞¬ª\n\n---\n\n### –§–û–†–ú–ê–¢ –í–´–í–û–î–ê (Telegram)\n\n* –¢–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç\n* –ë–µ–∑ markdown\n* –ê–±–∑–∞—Ü—ã, —Å–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å –∏–ª–∏ —Ü–∏—Ñ—Ä—ã\n* –î–æ–ø—É—Å—Ç–∏–º—ã —ç–º–æ–¥–∑–∏\n* –ù–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ ‚Äî –ó–ê–ì–õ–ê–í–ù–´–ú–ò –±—É–∫–≤–∞–º–∏\n* –ü—Ä–æ—Ü–µ–Ω—Ç—ã —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã\n\n---\n\n## –õ–û–ì–ò–ö–ê –ê–ù–ê–õ–ò–ó–ê (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê)\n\n### –®–ê–ì 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö\n\n–ò–∑–≤–ª–µ–∫–∏ –¢–û–õ–¨–ö–û —Ç–æ, —á—Ç–æ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ:\n\n* –¥–∏–∞–≥–Ω–æ–∑ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–¥–∞–Ω–Ω–æ–π –Ω–æ–∑–æ–ª–æ–≥–∏–∏\n* —Å—Ç–∞–¥–∏—é –∏ TNM (–µ—Å–ª–∏ –µ—Å—Ç—å)\n* –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—é\n* –º–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã)\n* –≤–æ–∑—Ä–∞—Å—Ç –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –æ—Å–æ–±–æ–π –≥—Ä—É–ø–ø–µ\n* –ø—Ä–æ—à–ª–æ–µ –ª–µ—á–µ–Ω–∏–µ\n* —Ç–µ–∫—É—â–µ–µ / –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –ª–µ—á–µ–Ω–∏–µ\n* –∑–Ω–∞—á–∏–º—ã–µ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n\n–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî —è–≤–Ω–æ —É–∫–∞–∂–∏ ¬´–Ω–µ —É–∫–∞–∑–∞–Ω–æ¬ª.\n\n---\n\n### –®–ê–ì 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π\n\n–ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¢–û–õ–¨–ö–û –ø–æ –¥–∞–Ω–Ω–æ–π –Ω–æ–∑–æ–ª–æ–≥–∏–∏.\n–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Ä–∫–µ—Ä—ã –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –æ–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π.\n\n---\n\n### –®–ê–ì 3. –ê–Ω–∞–ª–∏–∑ –ü–†–û–®–õ–û–ì–û –ª–µ—á–µ–Ω–∏—è\n\n–î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:\n\n* —Å—Ç–∞—Ç—É—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–µ—á–µ–Ω–∏—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\n* –ø–æ—è—Å–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫\n\n–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚Äî\n–∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É:\n¬´–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö¬ª.\n\n---\n\n### –®–ê–ì 4. –ê–Ω–∞–ª–∏–∑ –¢–ï–ö–£–©–ï–ì–û –ª–µ—á–µ–Ω–∏—è\n\n–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —à–∞–≥—É 3.\n\n---\n\n### –®–ê–ì 5. –§–∏–∫—Å–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ö–†–ò–¢–ò–ß–ù–û)\n\n–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ó–ê–§–ò–ö–°–ò–†–£–ô:\n\n* —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—à–ª–æ–≥–æ –ª–µ—á–µ–Ω–∏—è\n* –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—à–ª–æ–≥–æ –ª–µ—á–µ–Ω–∏—è\n* —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ –ª–µ—á–µ–Ω–∏—è\n* –ø—Ä–æ—Ü–µ–Ω—Ç —Ç–µ–∫—É—â–µ–≥–æ –ª–µ—á–µ–Ω–∏—è\n\n–≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è:\n\n* –ù–ï–õ–¨–ó–Ø –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å\n* –ù–ï–õ–¨–ó–Ø –º–µ–Ω—è—Ç—å –≤ patient-—Ä–µ–∂–∏–º–µ\n* –ù–ï–õ–¨–ó–Ø –æ–∫—Ä—É–≥–ª—è—Ç—å –∏–ª–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ\n\n---\n\n### –î–û–ü–£–°–¢–ò–ú–´–ï –°–¢–ê–¢–£–°–´ (–°–¢–†–û–ì–û)\n\n* —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\n* —á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\n* –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\n* –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö\n\n---\n\n## –§–û–†–ú–ê–¢ –í–´–í–û–î–ê\n\n### –ï–°–õ–ò ROLE = doctor\n\n–¢–µ–∫—Å—Ç –¥–ª—è –≤—Ä–∞—á–∞\n\n–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ\n–ü—Ä–æ—à–ª–æ–µ –ª–µ—á–µ–Ω–∏–µ: —Å—Ç–∞—Ç—É—Å (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç)\n–¢–µ–∫—É—â–µ–µ –ª–µ—á–µ–Ω–∏–µ: —Å—Ç–∞—Ç—É—Å (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç)\n\n–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ\n–ö—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.\n\n–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –ª–µ—á–µ–Ω–∏—è\n–î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:\n\n* —Å—Ç–∞—Ç—É—Å\n* —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\n* –ø–æ—è—Å–Ω–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞\n\n–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ª–µ—á–µ–Ω–∏—è\n–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ.\n\n–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏ —Ä–∏—Å–∫–∏\n\n* –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤\n* —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏\n* –±–µ–∑ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏ —Å–æ–≤–µ—Ç–æ–≤\n\n–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)\n\n* –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π\n* –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –æ—Ü–µ–Ω–∫—É\n\n–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞\n\n* –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç\n* –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–≤–æ–¥\n\n–ò—Å—Ç–æ—á–Ω–∏–∫–∏\n–ù–∞–∑–≤–∞–Ω–∏–µ, –≥–æ–¥, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω).\n\n---\n\n### –ï–°–õ–ò ROLE = patient\n\n–¢–µ–∫—Å—Ç –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∞\n\n–û–±—â–∏–π –≤—ã–≤–æ–¥\n–ü—Ä–æ—à–ª–æ–µ –ª–µ—á–µ–Ω–∏–µ: —Å—Ç–∞—Ç—É—Å (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç)\n–¢–µ–∫—É—â–µ–µ –ª–µ—á–µ–Ω–∏–µ: —Å—Ç–∞—Ç—É—Å (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç/ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç)\n\n–í–ê–ñ–ù–û:\n–ò—Å–ø–æ–ª—å–∑—É–π –¢–û–ß–ù–û —Ç–µ –∂–µ —Å—Ç–∞—Ç—É—Å—ã, —á—Ç–æ –∏ –≤ –æ—Ç—á—ë—Ç–µ –¥–ª—è –≤—Ä–∞—á–∞.\n–ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏–ª–∏ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è.\n\n–ß—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º\n–ü—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º, –±–µ–∑ —Ç–µ—Ä–º–∏–Ω–æ–≤.\n\n–ì–¥–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã\n–ü—Ä—è–º–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ:\n\n* –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç\n* —á—Ç–æ –≤–∞–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å —Å –≤—Ä–∞—á–æ–º\n\n–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)\n–ü—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º.\n\n–ò—Å—Ç–æ—á–Ω–∏–∫–∏\n–ù–∞–∑–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ –≥–æ–¥—ã.\n\n–í–∞–∂–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ\n–ê–Ω–∞–ª–∏–∑ –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.\n–û–Ω –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞.\n–í—Å–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–µ—á–∞—â–∏–π –≤—Ä–∞—á.\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        2688,
        896
      ],
      "id": "38f536c7-ea10-48af-9108-07c1a4cfaedb",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": "google/gemini-2.0-flash-001",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2768,
        1120
      ],
      "id": "fefd5ba8-446f-4514-a358-9562f8f808ee",
      "name": "OpenRouter Chat Model1",
      "credentials": {
        "openRouterApi": {
          "id": "6kLXtrCpJR770JWH",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3328,
        912
      ],
      "id": "c356c33c-3ce2-4e45-a631-7edb1c4c98ba",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "=‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ–Ω–∫–æ–ª–æ–≥–∏–∏. \n–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –±–æ–ª–µ–∑–Ω–∏ –æ–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1120,
        1168
      ],
      "id": "5195cac9-c0ea-4d36-968b-2bd8e281d246",
      "name": "Send a text message11",
      "webhookId": "62f9f2e9-be18-4101-9bbd-9e6c6edad5cf",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const content = $json.output;\nconst cleaned = content.replace(/```json|```/g, '').trim();\n\nlet parsed;\ntry {\n  parsed = JSON.parse(cleaned);\n} catch(e) {\n  throw new Error('AI Agent –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON: ' + content);\n}\n\nreturn [{\n  json: {\n    oncology_code: parsed.code,\n    oncology_name: parsed.name,\n    file_key: parsed.file_key,\n    book_key: parsed.book_key || null,\n    special_key: parsed.special_key || null,\n    patient_history: $('Merge').first().json.text\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        672,
        496
      ],
      "id": "b714dd18-b530-4efc-8c0d-fb261a35cd42",
      "name": "Code in JavaScript5",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=–¢–∏–ø –æ–Ω–∫–æ–ª–æ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω: {{ $json.oncology_name }} –û–¥–Ω–∞–∫–æ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–Ω–Ω–æ–º—É —Ç–∏–ø—É –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2752,
        1904
      ],
      "id": "f7b44625-8a8a-42aa-a4e4-9d70e52115f4",
      "name": "Send a text message12",
      "webhookId": "aed8148f-172d-4fd6-8fcc-26f07f896f51",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const text = $json.output;\nconst triggerData = $('Telegram Trigger').first().json;\nconst chatId = triggerData.message?.chat?.id ?? triggerData.callback_query?.message?.chat?.id;\nconst maxLength = 4000;\nconst chunks = [];\n\nfor (let i = 0; i < text.length; i += maxLength) {\n  chunks.push({\n    json: {\n      chunk: text.slice(i, i + maxLength),\n      chat_id: chatId\n    }\n  });\n}\n\nreturn chunks;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3040,
        912
      ],
      "id": "ac09fb20-583e-428b-91bc-86237d1c7cfe",
      "name": "Code in JavaScript6"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "={{ $json.chunk }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3616,
        960
      ],
      "id": "aae95f14-cfe7-40b3-8bf2-eaa230db1224",
      "name": "Send a text message13",
      "webhookId": "699e49ef-2433-4ba8-8bd2-c75f6f0b2853",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const mammoth = require('mammoth');\n\nconst binaryData = await this.helpers.getBinaryDataBuffer(0, 'data');\n\nconst result = await mammoth.extractRawText({ buffer: binaryData });\n\nreturn [{ json: { text: result.value } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -128,
        2432
      ],
      "id": "ea3d8019-891d-49e0-a4d1-8ca97b79f663",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "jsCode": "const triggerData = $('Telegram Trigger').first().json;\nconst userId = String(triggerData.message?.from?.id ?? triggerData.callback_query?.from?.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\n\nworkflowStaticData[userId + '_state'] = 'chat';\nworkflowStaticData[userId + '_context'] = $('AI Agent1').first().json.output;\nworkflowStaticData[userId + '_history'] = $('Code in JavaScript5').first().json.patient_history;\n\nreturn [{ json: { success: true } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4064,
        768
      ],
      "id": "9d776f8f-400e-4fc3-8f22-ff8b34ee22ca",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.message.from.id);\nconst chatId = String($json.message.chat.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\n\nconst context = workflowStaticData[userId + '_context'] || '';\nconst role = workflowStaticData[userId + '_role'] || 'patient';\nconst patientHistory = workflowStaticData[userId + '_history'] || '';\n\nconst text = String($json.message.text || '');\nconst isStop = text.toLowerCase() === '—Å—Ç–æ–ø' || text === '/stop';\n\nreturn [{ json: {\n  userId: userId,\n  chat_id: chatId,\n  message_text: text,\n  chat_context: String(context),\n  role: String(role),\n  patient_history: String(patientHistory),\n  is_stop: isStop\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2464,
        2192
      ],
      "id": "060777df-21d4-47e9-bbc9-40801b057bb0",
      "name": "Code in JavaScript9"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d37de2d0-12d4-442d-8244-f1e2db96aef7",
              "leftValue": "={{ $json.is_stop }}",
              "rightValue": "true",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        3040,
        2192
      ],
      "id": "75dc966f-60c0-493a-af67-2e9b79d18723",
      "name": "If4"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.message.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'idle';\nworkflowStaticData[userId + '_context'] = '';\nreturn [{ json: { ...$json } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3328,
        2336
      ],
      "id": "c0ecc3b6-4908-46aa-9112-f287fa1b521e",
      "name": "Code in JavaScript10"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "‚úÖ –î–∏–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à—ë–Ω. –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ ‚Äî –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3616,
        2336
      ],
      "id": "3051f7af-d5d1-422d-81ee-3226df5ed36f",
      "name": "Send a text message14",
      "webhookId": "7257b946-5d18-4e39-84ad-a7ec116c7c83",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Code in JavaScript9').item.json.message_text }}",
        "options": {
          "systemMessage": "=## –¢—ã –æ–ø—ã—Ç–Ω—ã–π –≤—Ä–∞—á-–æ–Ω–∫–æ–ª–æ–≥. –ü–∞—Ü–∏–µ–Ω—Ç –∏–ª–∏ –≤—Ä–∞—á —É–∂–µ –ø–æ–ª—É—á–∏–ª –ø–ª–∞–Ω –ª–µ—á–µ–Ω–∏—è –∏ –∑–∞–¥–∞—ë—Ç —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.\n\n## –†–û–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: \n{{ $('Code in JavaScript9').item.json.role }}\n* doctor: –∏—Å–ø–æ–ª—å–∑—É–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é, –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤\n* patient: –æ–±—ä—è—Å–Ω—è–π –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º –±–µ–∑ —Ç–µ—Ä–º–∏–Ω–æ–≤, –±–µ–∑ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞\n\n### –¢—ã –æ—Ç–≤–µ—á–∞–µ—à—å –¢–û–õ–¨–ö–û –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å.\n–ó–∞–ø—Ä–µ—â–µ–Ω–æ:\n\n* –ø–æ–≤—Ç–æ—Ä—è—Ç—å –≤–µ—Å—å –æ—Ç—á—ë—Ç\n* –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã\n\n### –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ:\n\n* —É–∂–µ –≤—ã–¥–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑\n* –∏—Å—Ö–æ–¥–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –±–æ–ª–µ–∑–Ω–∏\n\n### –§–æ—Ä–º–∞—Ç:\n\n* –∫–æ—Ä–æ—Ç–∫–æ\n* –ø–æ —Å—É—â–µ—Å—Ç–≤—É\n* –±–µ–∑ –Ω–æ–≤—ã—Ö –≤—ã–≤–æ–¥–æ–≤\n\n### –ò–°–¢–û–†–ò–Ø –ë–û–õ–ï–ó–ù–ò:\n{{ $('Code in JavaScript9').item.json.patient_history }}\n### –í–´–î–ê–ù–ù–´–ô –ü–õ–ê–ù –õ–ï–ß–ï–ù–ò–Ø:\n{{ $('Code in JavaScript9').item.json.chat_context }}\n\n## –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê ‚Äî –°–¢–†–û–ì–û:\n- –¢–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç\n- –ù–∏–∫–∞–∫–æ–≥–æ markdown: –Ω–∏–∫–∞–∫–∏—Ö *, **, #, _, ~, `, []()\n- –°–ø–∏—Å–∫–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å –∏–ª–∏ —Ü–∏—Ñ—Ä—ã\n- –ù–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏\n- –ê–±–∑–∞—Ü—ã —Ä–∞–∑–¥–µ–ª—è–π –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π\n- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –≤–µ—Å—å –ø–ª–∞–Ω –ª–µ—á–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç–µ"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        3264,
        1888
      ],
      "id": "6bc5c615-30b3-446f-a6db-dda340eb4421",
      "name": "AI Agent2",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "const rawText = $json.output;\n\n// –£–±–∏—Ä–∞–µ–º markdown —Å–∏–º–≤–æ–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–º–∞—é—Ç Telegram\nconst text = rawText\n  .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\n  .replace(/\\*(.*?)\\*/g, '$1')\n  .replace(/__(.*?)__/g, '$1')\n  .replace(/~~(.*?)~~/g, '$1')\n  .replace(/`{3}[\\s\\S]*?`{3}/g, '')\n  .replace(/`(.*?)`/g, '$1')\n  .replace(/\\|\\|(.*?)\\|\\|/g, '$1')\n  .replace(/#{1,6}\\s/g, '')\n  .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n  .trim();\n\nconst chatId = $('Telegram Trigger').first().json.message.chat.id;\nconst maxLength = 4000;\nconst chunks = [];\n\nfor (let i = 0; i < text.length; i += maxLength) {\n  chunks.push({\n    json: {\n      chunk: text.slice(i, i + maxLength),\n      chat_id: chatId\n    }\n  });\n}\n\nreturn chunks;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3616,
        2000
      ],
      "id": "d11e45d9-18f7-4e81-be92-0ca3d4bdfbd3",
      "name": "Code in JavaScript11"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3840,
        2000
      ],
      "id": "00607c07-b9db-4016-99b6-85a3c2f9fbcc",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "name": "Replace Me1",
      "typeVersion": 1,
      "position": [
        4288,
        2064
      ],
      "id": "67fbad39-f85c-4bf3-bebd-760c4675be38"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "={{ $json.chunk }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4064,
        2000
      ],
      "id": "3ec3e712-57df-4573-a645-465044493092",
      "name": "Send a text message15",
      "webhookId": "97b2e6fb-b13a-49da-86e2-ecda50e22079",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "‚úÖ –î–∏–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à—ë–Ω.  –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ ‚Äî –Ω–∞–∂–º–∏—Ç–µ \"–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\" –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        800
      ],
      "id": "ce5132f1-fbcd-4272-b9c1-be8ce249edf5",
      "name": "Send a text message16",
      "webhookId": "3d1f2f90-f56e-4f59-8bc3-c61aab8c3533",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nworkflowStaticData[userId + '_state'] = 'idle';\nworkflowStaticData[userId + '_context'] = '';\nreturn [{ json: { ...$json } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        800
      ],
      "id": "439f0310-a659-4dda-afe6-5edf378e7368",
      "name": "Code in JavaScript12"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3280,
        2112
      ],
      "id": "d9a2f0ec-6ac4-4787-8a29-e37d498b018d",
      "name": "OpenRouter Chat Model2",
      "credentials": {
        "openRouterApi": {
          "id": "6kLXtrCpJR770JWH",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "–ì–æ—Ç–æ–≤–ª—é –æ—Ç–≤–µ—Ç...",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1120,
        400
      ],
      "id": "771c8792-e272-4b01-8f9e-e2763540fd97",
      "name": "Send a text message17",
      "webhookId": "542c9228-b1bf-42d3-a27f-2699f2791ec3",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteMessage",
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "messageId": "={{ $('Send a text message17').item.json.result.message_id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3616,
        768
      ],
      "id": "8739319e-c8db-4137-9940-ecc53898097e",
      "name": "Delete a chat message",
      "webhookId": "1904c123-5e0c-49dd-867b-398d74b27c10",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const triggerData = $('Telegram Trigger').first().json;\nconst userId = String(triggerData.message?.from?.id);\nconst chatId = triggerData.message?.chat?.id;\nconst sd = $getWorkflowStaticData('global');\nconst role = sd[userId + '_role'] || null;\n\nconst newText = triggerData.message?.text || '';\n\n// –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±—É—Ñ–µ—Ä–µ\nconst existing = sd['buffer_' + userId] || '';\nsd['buffer_' + userId] = existing ? existing + '\\n' + newText : newText;\n\nreturn [{ json: {\n  userId,\n  chat_id: chatId,\n  role,\n  has_role: !!role,\n  buffer_text: sd['buffer_' + userId]\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -576,
        1760
      ],
      "id": "1ecdeff4-7b76-487a-a9b1-e2eee4e9e7ab",
      "name": "Code in JavaScript14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3720df38-9cf2-467c-9f23-6daa79faa55c",
              "leftValue": "={{ $json.has_role }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1024,
        2528
      ],
      "id": "38e6ce99-08c8-4c25-804d-9a2032f2da23",
      "name": "If8"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3720df38-9cf2-467c-9f23-6daa79faa55c",
              "leftValue": "={{ $json.has_role }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -800,
        1760
      ],
      "id": "f568abea-fa1b-41a0-80ec-32024a49473f",
      "name": "If7"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.callback_query.from.id);\nconst chatId = $json.callback_query.message.chat.id;\nconst sd = $getWorkflowStaticData('global');\nconst role = sd[userId + '_role'] || null;\n\nconst bufferText = sd['buffer_' + userId] || '';\nconst bufferEmpty = !bufferText.trim();\n\n// –û—á–∏—â–∞–µ–º –±—É—Ñ–µ—Ä –ø–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è\nif (!bufferEmpty) {\n  delete sd['buffer_' + userId];\n}\n\nreturn [{ json: {\n  ...$json,\n  userId,\n  chat_id: chatId,\n  role,\n  has_role: !!role,\n  buffer_empty: bufferEmpty,\n  text: bufferText.trim()\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -352,
        384
      ],
      "id": "96bc89ce-cf02-47d3-97fd-bda6f450287b",
      "name": "Code in JavaScript13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "04563f89-0850-4439-be2a-8172f583ca14",
              "leftValue": "={{ $json.buffer_empty }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -128,
        384
      ],
      "id": "f6b66f5a-b007-4c2b-b5a5-a1c85baccaa7",
      "name": "If6"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chat_id }}",
        "text": "‚ö†Ô∏è –í—ã –µ—â—ë –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ç–µ–∫—Å—Ç. –ù–∞–ø–∏—à–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –±–æ–ª–µ–∑–Ω–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ ‚úÖ –ì–æ—Ç–æ–≤–æ",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        96,
        384
      ],
      "id": "67f4fb19-252a-481f-96e3-a19476000360",
      "name": "Send a text message18",
      "webhookId": "c00741aa-a351-48d3-b6dc-4caee309d712",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=–¢–µ–∫—Å—Ç –ø–æ–ª—É—á–µ–Ω. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "‚úÖ –ì–æ—Ç–æ–≤–æ, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å",
                    "additionalFields": {
                      "callback_data": "buffer_ready"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -352,
        1760
      ],
      "id": "3a830a8c-ed46-480d-971a-7fe826f1376f",
      "name": "Send a text message21",
      "webhookId": "82e0ee5e-e1da-43d5-9227-da7d65164f2e",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–ª—å",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—Ä–∞—á",
                    "additionalFields": {
                      "callback_data": "role_doctor"
                    }
                  },
                  {
                    "text": "–ü–∞—Ü–∏–µ–Ω—Ç",
                    "additionalFields": {
                      "callback_data": "role_patient"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -800,
        2608
      ],
      "id": "4bafc3ea-5c24-464a-be4b-6bccd52856ac",
      "name": "Send a text message19",
      "webhookId": "46e1ce93-ccd0-4b1e-9c8b-378ee612808a",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üìã **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å **\n\n–í—Ä–∞—á - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —è–∑—ã–∫–µ\n–ü–∞—Ü–∏–µ–Ω—Ç - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º, –ø–æ–Ω—è—Ç–Ω–æ–º —è–∑—ã–∫–µ\n\n__–≠—Ç–æ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª –æ—Ç–≤–µ—Ç –ø–æ–¥ –≤–∞—Å__",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—Ä–∞—á",
                    "additionalFields": {
                      "callback_data": "role_doctor"
                    }
                  },
                  {
                    "text": "–ü–∞—Ü–∏–µ–Ω—Ç",
                    "additionalFields": {
                      "callback_data": "role_patient"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -576,
        1952
      ],
      "id": "6340025c-c81d-4089-bc57-39191b0c2d47",
      "name": "Send a text message20",
      "webhookId": "46e1ce93-ccd0-4b1e-9c8b-378ee612808a",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "=üí¨ –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ø–ª–∞–Ω—É –ª–µ—á–µ–Ω–∏—è.\n–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥",
                    "additionalFields": {
                      "callback_data": "stop_chat"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4288,
        864
      ],
      "id": "11457974-270d-4881-9452-a0ee5587884d",
      "name": "Send a text message22",
      "webhookId": "e9283cc4-f79b-4e89-90ab-23e36a4162b0",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.document.mime_type }}",
                    "rightValue": "application/pdf",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "db79f618-45c2-4273-9e28-33a89c31adf2"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pdf"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6e017e21-cd43-437c-913b-bee9ee947d26",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.document.mime_type }}",
                    "rightValue": "application/docx",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "docx"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -352,
        2400
      ],
      "id": "9f64bf63-dcb7-4a5c-bb41-e8a35606520f",
      "name": "Switch2"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é —Ñ–∞–π–ª —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞, –º—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -128,
        2624
      ],
      "id": "39bf3657-d856-46b9-948e-667ac6804ac3",
      "name": "Send a text message23",
      "webhookId": "82e0ee5e-e1da-43d5-9227-da7d65164f2e",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.result.chat.id }}",
        "text": "=–í—ã –ø–æ–ø–∞–ª–∏ –≤ –º–µ–Ω—é. –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "üìã –ü–æ–º–µ–Ω—è—Ç—å —Ä–æ–ª—å",
                    "additionalFields": {
                      "callback_data": "chage_role"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "ü§ñ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç",
                    "additionalFields": {
                      "callback_data": "about"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å",
                    "additionalFields": {
                      "callback_data": "feedback"
                    }
                  },
                  {
                    "text": "üõ† –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
                    "additionalFields": {
                      "callback_data": "support"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        96,
        800
      ],
      "id": "293212dd-fbe9-42e6-9e92-65a546e4279f",
      "name": "Send a text message25",
      "webhookId": "6bb53fb2-011a-498f-9008-799a0373ef17",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=üöÄ –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -352,
        0
      ],
      "id": "e4121665-8600-488a-97f5-a420d0ddd331",
      "name": "Send a text message24",
      "webhookId": "c5a33d13-5bdb-4a70-a44f-354a6370eaf9",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id }}",
        "text": "=ü§ñ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -352,
        192
      ],
      "id": "04e82dc2-935b-468c-bc2e-6bf087a1a1a6",
      "name": "Send a text message26",
      "webhookId": "c5a33d13-5bdb-4a70-a44f-354a6370eaf9",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–∏ –º–æ–¥–µ–ª–∏, –ø—Ä–æ–∏–∑–æ—à–µ–ª —Å–±–æ–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–≤–æ–¥.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        672,
        1264
      ],
      "id": "859b7c7e-c722-46d6-8d28-2b29d16d18c5",
      "name": "Send a text message27",
      "webhookId": "60b95c3c-843c-4ac3-bfb0-b5277ff197f0",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Code in JavaScript9').item.json.chat_id }}",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        3408,
        2112
      ],
      "id": "e69d70ca-7844-4cfa-8522-478e012d133b",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.message.from.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nconst role = workflowStaticData[userId + '_role'] || null;\n\nreturn [{ json: {\n  ...$json,\n  role: role,\n  has_role: !!role\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1024,
        1760
      ],
      "id": "fb256874-5e99-4eff-af51-26fb426cb8b2",
      "name": "Code in JavaScript16"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "path": "=/russco/{{ $('Code in JavaScript5').item.json.book_key }}.pdf"
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        1344,
        400
      ],
      "id": "d343adfc-f22e-4384-a17f-33f71f9a39af",
      "name": "Download a file1",
      "credentials": {
        "dropboxOAuth2Api": {
          "id": "ylDTbgHcVionbYsP",
          "name": "Dropbox account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "path": "=/special/{{ $('Code in JavaScript5').item.json.special_key }}.pdf"
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        1344,
        1824
      ],
      "id": "1545fd67-4936-41a1-9cf7-9ff054597920",
      "name": "Download a file2",
      "credentials": {
        "dropboxOAuth2Api": {
          "id": "ylDTbgHcVionbYsP",
          "name": "Dropbox account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        1568,
        208
      ],
      "id": "f9e66eb6-2e36-4da6-a5d9-4741c932ba7f",
      "name": "Extract from File1"
    },
    {
      "parameters": {
        "jsCode": "const guidelines = $input.all()[0]?.json.text || '';\nconst book = $input.all()[1]?.json.text || '';\nconst special = $input.all()[2]?.json.text || '';\n\nreturn [{ json: {\n  ...$('Code in JavaScript5').first().json,\n  guidelines_text: guidelines,\n  book_text: book,\n  special_text: special\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2016,
        1056
      ],
      "id": "9f679049-9c4a-4661-b17c-98197a38c35b",
      "name": "Code in JavaScript17"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        1568,
        400
      ],
      "id": "cb037ae3-897a-4194-8334-f355ae278212",
      "name": "Extract from File2",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        1568,
        1824
      ],
      "id": "7440b1c9-6202-47b1-9469-81c685ce673b",
      "name": "Extract from File3",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1792,
        1040
      ],
      "id": "e01be6ba-bb43-4fe3-89ec-ba60c5c01875",
      "name": "Merge1"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "–û—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º —á—É—Ç—å-—á—É—Ç—å...",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2240,
        1056
      ],
      "id": "f28308ea-64f5-4f77-ba02-a214962e87ee",
      "name": "Send a text message28",
      "webhookId": "542c9228-b1bf-42d3-a27f-2699f2791ec3",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteMessage",
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "messageId": "={{ $('Send a text message28').item.json.result.message_id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3840,
        768
      ],
      "id": "32f45986-a70c-41b0-a195-9a27d2523220",
      "name": "Delete a chat message1",
      "webhookId": "1904c123-5e0c-49dd-867b-398d74b27c10",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "–ì–æ—Ç–æ–≤–ª—é –æ—Ç–≤–µ—Ç...",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2752,
        2192
      ],
      "id": "9987db61-42ba-4b44-82f1-4d68b29d12c0",
      "name": "Send a text message30",
      "webhookId": "542c9228-b1bf-42d3-a27f-2699f2791ec3",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteMessage",
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "messageId": "={{ $('Send a text message30').item.json.result.message_id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4064,
        1808
      ],
      "id": "93d67cd8-9158-42d8-864d-23960fc43abf",
      "name": "Delete a chat message2",
      "webhookId": "1904c123-5e0c-49dd-867b-398d74b27c10",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "4591f32a-0e26-45bc-8f27-7cd1fd15c961",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2240,
        2096
      ],
      "id": "294cd7c3-7875-4a27-b263-03de7390f217",
      "name": "If5"
    },
    {
      "parameters": {
        "chatId": "={{ $json.callback_query?.message?.chat?.id ?? $json.message?.chat?.id ?? $('Telegram Trigger').item.json.message?.chat?.id ?? $('Telegram Trigger').item.json.callback_query.message.chat.id}}",
        "text": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2464,
        2000
      ],
      "id": "61eab9d2-71df-43d5-9194-6151f38d180d",
      "name": "Send a text message29",
      "webhookId": "c8f37da0-3335-4de1-92ef-dc23b1e99f3f",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const userId = String($json.message?.from?.id ?? $json.callback_query?.from?.id);\nconst workflowStaticData = $getWorkflowStaticData('global');\nconst role = workflowStaticData[userId + '_role'] || null;\n\nreturn [{ json: {\n  ...$json,\n  role: role,\n  has_role: !!role\n}}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2144,
        1376
      ],
      "id": "9c3e3a43-abb2-4713-acbd-a5d995ea3cf5",
      "name": "Code in JavaScript15"
    },
    {
      "parameters": {
        "chatId": "={{ $json.result.chat.id }}",
        "text": "=üìã **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å **\n\n–í—Ä–∞—á - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —è–∑—ã–∫–µ\n–ü–∞—Ü–∏–µ–Ω—Ç - –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º, –ø–æ–Ω—è—Ç–Ω–æ–º —è–∑—ã–∫–µ\n\n__–≠—Ç–æ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª –æ—Ç–≤–µ—Ç –ø–æ–¥ –≤–∞—Å__",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—Ä–∞—á",
                    "additionalFields": {
                      "callback_data": "role_doctor"
                    }
                  },
                  {
                    "text": "–ü–∞—Ü–∏–µ–Ω—Ç",
                    "additionalFields": {
                      "callback_data": "role_patient"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -336,
        624
      ],
      "id": "e570f751-f178-4e3f-8e92-e67f863e5b1e",
      "name": "Send a text message31",
      "webhookId": "46e1ce93-ccd0-4b1e-9c8b-378ee612808a",
      "credentials": {
        "telegramApi": {
          "id": "SLma7sgP9XyP0kLv",
          "name": "Telegram account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Code in JavaScript15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send a text message24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message26",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message8": {
      "main": [
        [
          {
            "node": "Send a text message9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Send a text message10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Send a text message6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message6": {
      "main": [
        [
          {
            "node": "Send a text message7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a file": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Send a text message17",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download a file": {
      "main": [
        [
          {
            "node": "Extract from File1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Code in JavaScript6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Delete a chat message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript6": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message13": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript9": {
      "main": [
        [
          {
            "node": "Send a text message30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Code in JavaScript10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript10": {
      "main": [
        [
          {
            "node": "Send a text message14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "Code in JavaScript11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript11": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [
          {
            "node": "Delete a chat message2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message15": {
      "main": [
        [
          {
            "node": "Replace Me1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message16": {
      "main": [
        [
          {
            "node": "Send a text message25",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript12": {
      "main": [
        [
          {
            "node": "Send a text message16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message17": {
      "main": [
        [
          {
            "node": "Download a file",
            "type": "main",
            "index": 0
          },
          {
            "node": "Download a file1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Download a file2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete a chat message": {
      "main": [
        [
          {
            "node": "Delete a chat message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript14": {
      "main": [
        [
          {
            "node": "Send a text message21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If8": {
      "main": [
        [
          {
            "node": "Get a file",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Code in JavaScript14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript13": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Send a text message18",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message24": {
      "main": [
        [
          {
            "node": "Send a text message5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message26": {
      "main": [
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript16": {
      "main": [
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download a file1": {
      "main": [
        [
          {
            "node": "Extract from File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download a file2": {
      "main": [
        [
          {
            "node": "Extract from File3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript17": {
      "main": [
        [
          {
            "node": "Send a text message28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File2": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Extract from File3": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Code in JavaScript17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message28": {
      "main": [
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete a chat message1": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message30": {
      "main": [
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete a chat message2": {
      "main": [
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Code in JavaScript9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript15": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "e5076732-6ad3-4745-8649-19a941fa6c67",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "8003ca067c15abf551727f599a5348055d86cfbcfdda7dbdb1d3604bf15b5853"
  },
  "id": "rrGJB44qPkWMjnev",
  "tags": []
}
